<div class="content" fxLayout>
	<div class="card">
		<div class="card-body"  fxLayout>
			<h3>Content Type Editor</h3>
			<span ></span>
			<button class="btn" (click)="router.navigate(['content-types'])"><span>close</span></button>
		</div>
		<div class="card-body">
			<form [formGroup]="rForm" class="d-flex flex-column m1"  >
				
				<div class="form-group">
					<label>Max 255 characters</label>
					<input class="form-control" formControlName="name" maxlength="255" placeholder="Enter a name">
					<span class="form-text text-muted" align="end">{{rForm.controls['name'].value?.length || 0}}/255</span>
				</div>
			
				<div class="form-group">
					<label>Max 255 characters</label>
					<input class="form-control" formControlName="description" maxlength="255" placeholder="Enter a description">
					<span class="form-text text-muted" align="end">{{rForm.controls['description'].value?.length || 0}}/255</span>
				</div>
				
				<div *ngIf="!rForm.value.new" class="d-flex flex-column m1" >
					<div class="d-flex"  >
						<label>Requires a template</label>
						<input type="checkbox" class="form-check-input" formControlName="requiresTemplate">
					</div>
					<div class="d-flex">
						<h3>Fields</h3>
						<button class="form-control" (click)="this.addField()"><span>add</span></button>
					</div>
					<div formArrayName="fields" class="well">
						<div class="card" *ngFor="let field of fields.controls, trackBy:trackById; let i=index" [formGroupName]="i" >
							<!-- The repeated field template -->
							<div class="card-body">
								<div class="row" class="d-flex flex-sm-column"  >
									<button class="btn" (click)="removeFieldControl(i)"><span>delete</span></button>
									<span ></span>
									<div class="form-group">
									    <input type="checkbox" class="form-check-input" formControlName="required" value="Required">
									</div>
								</div>
								<div class="row" class="d-flex flex-column">
									<div  class="form-group" class="form-group">
										<label>Display Name</label>
									    <input class="form-control" class="form-control" formControlName="displayName">
									</div>
									<div class="form-group" class="form-group">
										<label>Name</label>
									    <input class="form-control" class="form-control" formControlName="name">
									    <span class="form-text text-muted" align="end">case sensitive; no special characters</span>
									</div>
									<div class="form-group">
										<label>Type of value</label>
										<select class="form-control" formControlName="fieldType" >
											<option *ngFor="let value of this.fieldTypes" [value]="value.name">{{value.name}}</option>
										</select>
									</div>
								</div>
							</div>
							
						    <!-- End of the repeated field template -->
						</div>
					</div>
				</div>
				<br/>
			
			</form>
		</div>
		<div class="d-flex justify-content-around flex-wrap">
			<button  class="warn" [disabled]="rForm.value.new" (click)="this.delete(rForm.value)"><span>delete</span></button>
			
			<button  type="submit" class="primary" [disabled]="!rForm.valid" (click)="save(rForm.value)"><span>save</span></button>
		</div>
	</div>
</div>